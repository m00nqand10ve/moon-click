# 置顶文本显示工具 (Floating Text Display)

一个轻量级的桌面应用程序，允许用户通过全局快捷键快速输入文本，并将文本以置顶悬浮窗口的形式显示在屏幕上。适用于快速记录临时信息、提醒事项或需要持续可见的笔记。

## 🚀 功能特性

- **全局快捷键触发**: 在任何应用程序中按下快捷键即可快速输入文本
- **置顶悬浮窗口**: 输入的文本以始终置顶的窗口形式显示，不会被其他窗口遮挡
- **多窗口支持**: 可以同时创建多个悬浮窗口，每个窗口显示不同的文本
- **窗口拖动**: 支持鼠标拖动悬浮窗口到任意位置
- **快速删除**: 每个悬浮窗口都有删除按钮，点击即可关闭
- **半透明效果**: 悬浮窗口具有 90% 透明度，不会完全遮挡背景内容
- **系统托盘**: 应用在系统托盘中运行，不占用任务栏空间
- **可自定义配置**: 支持通过配置文件自定义快捷键和窗口样式

## 💡 使用场景

- 记录临时信息和笔记
- 显示重要提醒和待办事项
- 临时存放密码或代码片段
- 在演示或会议中显示关键信息
- 作为临时便签使用

## 🛠️ 系统要求

- **操作系统**: Windows 7/8/10/11
- **Python**: 3.7 或更高版本
- **内存**: 最少 50MB 可用空间
- **权限**: 需要管理员权限以支持全局快捷键

## 📦 安装说明

### 1. 克隆或下载项目

```bash
git clone <repository-url>
cd floating-text-display
```

或者直接下载项目压缩包并解压。

### 2. 安装依赖

使用 pip 安装所需的 Python 库：

```bash
pip install -r requirements.txt
```

**依赖包包括：**
- `keyboard`: 用于全局快捷键监听
- `pystray`: 用于系统托盘功能
- `Pillow`: 用于图标生成
- `pywin32`: 用于 Windows 系统特定功能（如需要）

## 运行说明

### 启动应用程序

在项目目录下运行：

```bash
python main.py
```

或者双击 `启动应用.bat` 批处理文件。

**⚠️ 重要提示**: 在 Windows 上，全局快捷键监听可能需要管理员权限。如果快捷键无法正常工作，请以管理员身份运行命令提示符或 PowerShell，然后执行上述命令。

### 使用应用程序

1. **启动后**: 应用程序会在系统托盘中显示一个图标（T 字母）
2. **输入文本**: 按下快捷键（默认为 `Ctrl + Shift + T`）打开输入窗口
3. **确认输入**: 在输入框中输入文本后按 `Enter` 键，文本将显示在悬浮窗口中
4. **取消输入**: 按 `Escape` 键关闭输入窗口而不创建悬浮窗口
5. **移动窗口**: 点击并拖动悬浮窗口可以移动到任意位置
6. **删除窗口**: 点击悬浮窗口右上角的 `X` 按钮关闭窗口
7. **退出应用**: 右键点击系统托盘图标，选择"退出"

## ⌨️ 快捷键说明

### 默认快捷键

- **触发输入窗口**: `Ctrl + Shift + T`
- **确认输入**: `Enter`
- **取消输入**: `Escape`

### 修改快捷键

如果默认快捷键与其他应用程序冲突，可以通过修改配置文件来自定义快捷键：

1. 打开项目目录下的 `config.json` 文件
2. 修改 `hotkey` 字段的值
3. 保存文件并重启应用程序

快捷键格式示例：
- `ctrl+shift+t`
- `ctrl+alt+n`
- `shift+f1`
- `ctrl+shift+alt+x`

支持的按键包括：
- 修饰键: `ctrl`, `shift`, `alt`, `win`
- 字母键: `a-z`
- 功能键: `f1-f12`
- 数字键: `0-9`

## 🖥️ 悬浮窗口操作

### 移动窗口

点击悬浮窗口的任意位置（除了删除按钮），按住鼠标左键拖动即可移动窗口到屏幕上的任意位置。

### 删除窗口

每个悬浮窗口的右上角都有一个 `X` 删除按钮：
- 点击删除按钮即可关闭该悬浮窗口
- 删除操作不会影响其他悬浮窗口
- 窗口关闭后会立即释放系统资源

## ⚙️ 配置文件说明

应用程序使用 `config.json` 文件存储配置。首次运行时会自动创建默认配置文件。

### 配置文件示例

```json
{
  "hotkey": "ctrl+shift+t",
  "window_opacity": 0.9,
  "default_position": {
    "x": 100,
    "y": 100
  },
  "font": {
    "family": "Arial",
    "size": 12
  }
}
```

### 配置项说明

- **hotkey** (字符串): 全局快捷键组合
  - 默认值: `"ctrl+shift+t"`
  - 格式: 使用 `+` 连接多个按键，如 `"ctrl+alt+n"`

- **window_opacity** (浮点数): 悬浮窗口的透明度
  - 默认值: `0.9` (90% 不透明)
  - 范围: `0.0` (完全透明) 到 `1.0` (完全不透明)

- **default_position** (对象): 悬浮窗口的默认位置
  - `x`: 距离屏幕左边缘的像素距离
  - `y`: 距离屏幕顶部的像素距离
  - 默认值: `{"x": 100, "y": 100}`

- **font** (对象): 悬浮窗口中文本的字体设置
  - `family`: 字体名称（如 `"Arial"`, `"微软雅黑"`, `"Consolas"`）
  - `size`: 字体大小（像素）
  - 默认值: `{"family": "Arial", "size": 12}`

### 修改配置

1. 关闭应用程序（右键托盘图标选择"退出"）
2. 使用文本编辑器打开 `config.json`
3. 修改所需的配置项
4. 保存文件
5. 重新启动应用程序

**⚠️ 注意**: 配置文件必须是有效的 JSON 格式，否则应用程序将使用默认配置。

## 🐛 故障排除

### 快捷键不工作

- **可能原因**: 缺少管理员权限
- **解决方案**: 以管理员身份运行应用程序
- **可能原因**: 快捷键与其他应用程序冲突
- **解决方案**: 修改配置文件使用不同的快捷键组合
- **可能原因**: 防病毒软件阻止
- **解决方案**: 将应用程序添加到防病毒软件的白名单中

### 悬浮窗口不显示

- **可能原因**: 窗口被移动到屏幕外
- **解决方案**: 删除 `config.json` 文件让应用重新生成默认配置
- **可能原因**: 系统不支持窗口透明度
- **解决方案**: 确保系统支持窗口透明度功能，并检查显卡驱动

### 应用程序无法启动

- **可能原因**: 依赖包未正确安装
- **解决方案**: 确认已安装所有依赖包：`pip install -r requirements.txt`
- **可能原因**: Python 版本过低
- **解决方案**: 检查 Python 版本是否为 3.7 或更高
- **可能原因**: 缺少系统库
- **解决方案**: 查看控制台输出的错误信息并按提示修复

### 托盘图标显示异常

- **可能原因**: 系统托盘区域空间不足
- **解决方案**: 整理系统托盘图标，为应用程序留出空间
- **可能原因**: 图标文件损坏
- **解决方案**: 重启应用程序

## 📁 项目结构

```
floating-text-display/
├── main.py                 # 主程序入口和应用程序类
├── config.py              # 配置管理器
├── windows.py             # 输入窗口和悬浮窗口类
├── tray.py                # 系统托盘功能
├── config.json            # 配置文件（首次运行自动生成）
├── 启动应用.bat           # Windows 启动批处理文件
├── requirements.txt       # Python 依赖列表
└── README.md             # 本文档
```

## 📄 许可证

本项目采用 MIT 许可证。

## 🤝 贡献

欢迎提交问题报告和功能建议！

### 如何贡献

1. Fork 项目
2. 创建功能分支
3. 提交更改
4. 发起 Pull Request

### 开发环境设置

1. 克隆项目
2. 安装依赖: `pip install -r requirements.txt`
3. 启动开发模式: `python main.py`

## 📞 联系方式

如有问题或建议，请通过以下方式联系：
- 提交 GitHub Issues
- 发送邮件至 [邮箱地址]

## 🆕 更新日志

### v1.0.0 (初始版本)
- 实现基本的置顶文本显示功能
- 添加全局快捷键支持
- 支持多窗口操作
- 系统托盘集成