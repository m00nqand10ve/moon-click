# 实施计划

- [x] 1. 创建项目结构和配置管理
  - 创建项目目录结构（main.py, config.py, windows.py, tray.py）
  - 实现 ConfigManager 类，支持读取和保存 JSON 配置文件
  - 创建默认配置文件模板（config.json）
  - _需求: 4.1, 4.2, 4.3, 5.2_

- [x] 2. 实现输入窗口组件
  - 创建 InputWindow 类，使用 Tkinter Toplevel 窗口
  - 实现窗口居中显示逻辑
  - 添加文本输入框并自动获取焦点
  - 绑定 Enter 键提交和 Escape 键取消事件
  - _需求: 1.1, 1.2, 1.4_

- [x] 3. 实现悬浮窗口组件
- [ ] 3.1 创建基础悬浮窗口


  - 创建 FloatingWindow 类，使用 Tkinter Toplevel 窗口
  - 实现置顶属性（topmost）和透明度设置（alpha）
  - 添加文本标签显示用户输入内容
  - 实现窗口自动调整大小以适应文本内容
  - _需求: 2.1, 2.2, 2.3, 2.5_

- [x] 3.2 实现窗口拖动功能
  - 绑定鼠标按下事件记录初始位置
  - 绑定鼠标移动事件计算偏移量并更新窗口位置
  - 确保拖动过程中窗口保持置顶状态
  - _需求: 3.1, 3.2_

- [x] 3.3 添加删除按钮
  - 在悬浮窗口右上角添加删除按钮（X）
  - 绑定按钮点击事件关闭窗口
  - 实现窗口关闭时的回调通知主应用
  - _需求: 3.3, 3.4_
-



- [x] 4. 实现全局快捷键监听





  - 在 main.py 中创建 HotkeyListener 类，使用 keyboard 库
  - 实现快捷键注册功能，从配置读取快捷键设置
  - 实现快捷键回调机制触发输入窗口显示
  - 添加异常处理应对快捷键冲突
  - _需求: 1.1, 1.3, 4.1, 4.4_

- [x] 5. 实现系统托盘功能








  - 在 tray.py 中创建 SystemTray 类，使用 pystray 库
  - 创建托盘图标（使用 Pillow 生成简单的文本图标）
  - 实现右键菜单，包含"退出"选项
  - 绑定退出选项到应用程序退出方法
  - _需求: 5.3, 5.4_

- [x] 6. 实现主应用程序类





  - 在 main.py 中创建 Application 类作为应用程序入口
  - 初始化 Tkinter 主窗口（隐藏）
  - 初始化配置管理器并加载配置
  - 创建悬浮窗口列表用于管理多个窗口
  - 实现 show_input_window 方法显示输入窗口
  - 实现 create_floating_window 方法创建新悬浮窗口并计算位置
  - 实现悬浮窗口默认位置计算（屏幕右上角）
  - 实现多窗口位置偏移逻辑（向下偏移避免重叠）
  - 实现 remove_floating_window 方法从列表中移除窗口
  - 实现 quit 方法清理资源并退出应用
  - _需求: 1.1, 2.1, 2.4, 2.5, 3.4, 5.1_

- [x] 7. 集成所有组件并完成主入口





  - 在 Application 类中初始化并启动快捷键监听器
  - 在 Application 类中初始化并启动系统托盘
  - 在 main.py 中添加应用程序启动逻辑和异常处理
  - 实现 if __name__ == "__main__" 入口点
  - 确保应用在 3 秒内完成初始化
  - _需求: 1.1, 5.1, 5.2, 5.5_

- [x] 8. 创建用户文档





  - 创建 README.md 包含项目介绍和功能说明
  - 编写安装说明（依赖安装命令）
  - 编写运行说明（启动命令）
  - 说明默认快捷键和修改方法
  - 说明悬浮窗口删除操作
  - 添加配置文件示例和说明
  - _需求: 4.1, 5.2_

- [ ]* 9. 测试和优化
- [ ]* 9.1 编写单元测试
  - 为 ConfigManager 编写配置读写测试
  - 为窗口位置计算逻辑编写测试
  - 为配置验证逻辑编写测试
  - _需求: 所有需求_

- [ ]* 9.2 执行集成测试
  - 测试快捷键触发到输入窗口显示的完整流程
  - 测试输入确认到悬浮窗口创建的完整流程
  - 测试删除按钮关闭窗口的功能
  - 测试多窗口同时存在的场景
  - _需求: 所有需求_
